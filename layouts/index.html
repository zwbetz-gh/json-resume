{{ $resume := site.Data.resume }}

{{ $headTitle := printf "Resume for %s, %s" $resume.basics.name $resume.basics.label }}
{{ $bodyTitle := printf "%s, %s" $resume.basics.name $resume.basics.label }}

{{ $bootstrapCss := resources.Get "css/bootstrap.css" }}

{{ $customCss := resources.Get "css/custom.css" }}

{{ $bundleCss := slice $bootstrapCss $customCss | resources.Concat "css/bundle.css" | resources.PostCSS }}

{{ $mainJs := resources.Get "js/main.js" }}

{{ if hugo.IsProduction }}
  {{ $bundleCss = $bundleCss | minify | fingerprint | resources.PostProcess }}
  {{ $mainJs = $mainJs | minify | fingerprint }}
{{ end }}

<!doctype html>
<html lang="{{ site.Language.Lang }}">
  <head>
    {{ hugo.Generator }}
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="canonical" href="{{ $resume.basics.resume }}">
    <title>{{ $headTitle }}</title>
    <style>
      {{ $bundleCss.Content | safeCSS }}
    </style>
  </head>
  <body>
    <div class="container resume">

      <div class="row resume-section">
        <div class="col">
          <h1>{{ $bodyTitle }}</h1>
          <p>{{ $resume.basics.summary }}</p>
        </div>
      </div>

      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Contact</h2>
        </div>
        <div class="col-md">
          <strong>Email:</strong>
          <a href="{{ $resume.basics.contact }}" target="_blank" rel="noreferrer">{{ $resume.basics.contact }}</a>
        </div>
      </div>

      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Skills</h2>
        </div>
        <div class="col-md">
          {{ delimit $resume.skills  ", " }}
        </div>
      </div>

      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Tools</h2>
        </div>
        <div class="col-md">
          <strong>Languages:</strong> {{ delimit $resume.tools.languages ", " }}
          <br>
          <strong>Frameworks:</strong> {{ delimit $resume.tools.frameworks ", " }}
          <br>
          <strong>Tooling:</strong> {{ delimit $resume.tools.tooling ", " }}
        </div>
      </div>

      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Work</h2>
        </div>
        <div class="col-md">
          {{ range $resume.work }}
            {{ $freelance := "Freelance" }}
            {{ $position_company := $freelance }}
            {{ if ne .company $freelance }}
              {{ $position_company = printf "%s at %s" .position .company }}
            {{ end }}
            <strong>{{ $position_company }}</strong>
            <br>
            {{ printf "%s to %s" .startDate .endDate | safeHTML }}
            <details
              class="resume-highlights"
              {{ if .showHighlights }}open{{ end }}
            >
              <summary>Highlights</summary>
              <ul>
                {{ range .highlights }}
                  <li>{{ . }}</li>
                {{ end }}
              </ul>
            </details>
          {{ end }}
        </div>
      </div>

      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Education</h2>
        </div>
        <div class="col-md">
          <p>
            {{ range $resume.education }}
              <strong>{{ .institution }}</strong>
              <br>
              {{ printf "%s to %s" .startDate .endDate | safeHTML }}
              <br>
              {{ printf "%s, %s" .area .studyType }}
            {{ end }}
          </p>
        </div>
      </div>

      {{ with $resume.securityClearances }}
        <div class="row resume-section">
          <div class="col-md-3">
            <h2>Clearances</h2>
          </div>
          <div class="col-md">
            <ul>
              {{ range . }}
                <li>{{ .name }}</li>
              {{ end }}
            </ul>
          </div>
        </div>
      {{ end }}

      {{ with $resume.certifications }}
        <div class="row resume-section">
          <div class="col-md-3">
            <h2>Certifications</h2>
          </div>
          <div class="col-md">
            <ul>
              {{ range . }}
                <li>{{ .name }}, {{ .date }}</li>
              {{ end }}
            </ul>
          </div>
        </div>
      {{ end }}


      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Awards</h2>
        </div>
        <div class="col-md">
          {{ range $resume.awards }}
            <p>
              <strong>{{ .title }}</strong>
              <br>
              {{ .awarder }}, {{ .date }}
            </p>
          {{ end }}
        </div>
      </div>

      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Peer Feedback</h2>
        </div>
        <div class="col-md">
          {{ range $resume.peerFeedback }}
            <p>
              <strong>{{ .name }}</strong>
              <br>
              <a href="{{ .url }}" target="_blank" rel="noreferrer">{{ .url }}</a>
            </p>
          {{ end }}
        </div>
      </div>

      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Writing Samples</h2>
        </div>
        <div class="col-md">
          {{ range $resume.writingSamples }}
            <p>
              <strong>{{ .name }}</strong>
              <br>
              <a href="{{ .url }}" target="_blank" rel="noreferrer">{{ .url }}</a>
            </p>
          {{ end }}
        </div>
      </div>

      <div class="row resume-section">
        <div class="col-md-3">
          <h2>Profiles</h2>
        </div>
        <div class="col-md">
          <ul>
            {{ range $resume.basics.profiles }}
              <li>
                <a href="{{ .url }}" target="_blank" rel="noreferrer">{{ .username }}</a> on {{ .network }}
              </li>
            {{ end }}
          </ul>
        </div>
      </div>

    </div>

    <script>
      {{ $mainJs.Content | safeJS }}
    </script>
  </body>
</html>
